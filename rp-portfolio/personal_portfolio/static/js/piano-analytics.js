!function(){"use strict";var t={site:"",collectDomain:"c.atinternet-solutions.com",path:"event",visitorStorageMode:"fixed",storageLifetimeVisitor:395,storageLifetimeUser:395,storageLifetimePrivacy:395,privacyDefaultMode:"optin",sendEventWhenOptout:!0,offlineStorageMode:"required",offlineSendTimeout:500,offlineStorageCapacity:1,isVisitorClientSide:!0,enableCallbacks:!0,documentLevel:"document",cookieDomain:"",cookieSecure:!1,cookiePath:"/",cookieSameSite:"lax",encodeStorageBase64:!1,addEventURL:"true",clickAutoManagement:!0,enableUTMTracking:!0,campaignPrefix:["at_"],storageVisitor:"pa_visitorid",storageUser:"pa_user",version:"6.0.0-beta",privacy:{storageKey:"pa_privacy",storageKeys:{pa_visitorid:!0,pa_privacy:!0,pa_user:!0},modes:{optin:{name:"optin",properties:{include:{visitor_privacy_consent:!0,visitor_privacy_mode:"optin"},whitelist:{"*":{"*":!0}},blacklist:{"*":{}}},storage:{whitelist:{"*":!0},blacklist:{}},events:{whitelist:{"*":!0},blacklist:{}}},optout:{name:"optout",visitorId:"OPT-OUT",properties:{include:{visitor_privacy_consent:!1,visitor_privacy_mode:"optout"},whitelist:{"*":{}},blacklist:{"*":{}}},storage:{whitelist:{pa_visitorid:!0,pa_privacy:!0},blacklist:{}},events:{whitelist:{"*":!0},blacklist:{}}},noConsent:{name:"noConsent",visitorId:"Consent-NO",properties:{include:{visitor_privacy_consent:!1,visitor_privacy_mode:"no-consent"},whitelist:{"*":{}},blacklist:{"*":{}}},storage:{whitelist:{},blacklist:{"*":!0}},events:{whitelist:{"*":!0},blacklist:{}}},noStorage:{name:"noStorage",visitorId:"no-storage",properties:{include:{visitor_privacy_consent:!1,visitor_privacy_mode:"no-storage"},whitelist:{"*":{app_crash:!0,app_crash_class:!0,app_crash_screen:!0,app_dsfs:!0,app_dsls:!0,app_dsu:!0,app_fsd:!0,app_fsdau:!0,app_fsmn:!0,app_fsw:!0,app_fswd:!0,app_fswdn:!0,app_fswy:!0,app_fsy:!0,app_id:!0,app_sc:!0,app_scsu:!0,app_session_status:!0,app_sessionid:!0,app_version:!0,app_visitor_status:!0,av_ad_type:!0,av_author:!0,av_auto_mode:!0,av_broadcaster:!0,av_broadcasting_type:!0,av_buffer_total_duration:!0,av_channel:!0,av_content:!0,av_content_duration:!0,av_content_duration_range:!0,av_content_genre:!0,av_content_id:!0,av_content_linked:!0,av_content_theme1:!0,av_content_theme2:!0,av_content_theme3:!0,av_content_time_consumed:!0,av_content_type:!0,av_content_version:!0,av_episode:!0,av_episode_id:!0,av_language:!0,av_launch_reason:!0,av_location:!0,av_playback_completion_rate:!0,av_playback_total_duration:!0,av_player:!0,av_player_error:!0,av_player_position:!0,av_player_version:!0,av_position:!0,av_publication_date:!0,av_rebuffer_total_duration:!0,av_session_backward:!0,av_session_bounce:!0,av_session_buffering:!0,av_session_content_duration:!0,av_session_error:!0,av_session_forward:!0,av_session_id:!0,av_session_last_event:!0,av_session_rebuffering:!0,av_session_time:!0,av_session_time_utc:!0,av_show:!0,av_show_season:!0,av_subtitles:!0,av_url:!0,browser:!0,browser_cookie_acceptance:!0,browser_group:!0,browser_language:!0,browser_language_local:!0,browser_version:!0,cart_creation_utc:!0,cart_id:!0,cart_lifetime:!0,cart_nbdistinctproduct:!0,cart_quantity:!0,cart_turnovertaxfree:!0,cart_turnovertaxincluded:!0,cart_version:!0,click:!0,click_chapter1:!0,click_chapter2:!0,click_chapter3:!0,click_full_name:!0,connection_isp:!0,connection_monitor:!0,connection_organisation:!0,date:!0,date_day:!0,date_daynumber:!0,date_month:!0,date_monthnumber:!0,date_week:!0,date_year:!0,date_yearofweek:!0,device_brand:!0,device_display_height:!0,device_display_width:!0,device_hour:!0,device_name:!0,device_name_tech:!0,device_screen_diagonal:!0,device_screen_height:!0,device_screen_width:!0,device_type:!0,event_collection_platform:!0,event_collection_version:!0,event_hour:!0,event_id:!0,event_minute:!0,event_position:!0,event_second:!0,event_time:!0,event_time_utc:!0,event_url:!0,event_url_domain:!0,event_url_full:!0,exclusion_cause:!0,exclusion_type:!0,geo_city:!0,geo_continent:!0,geo_country:!0,geo_latitude:!0,geo_longitude:!0,geo_metro:!0,geo_region:!0,goal_type:!0,hit_time_utc:!0,implication_degree:!0,ise_click_rank:!0,ise_keyword:!0,ise_page:!0,ise_result:!0,mv_creation:!0,mv_test:!0,mv_wave:!0,offsite_confirmation:!0,onsitead_advertiser:!0,onsitead_campaign:!0,onsitead_category:!0,onsitead_creation:!0,onsitead_detailed_placement:!0,onsitead_format:!0,onsitead_general_placement:!0,onsitead_type:!0,onsitead_url:!0,onsitead_variant:!0,os:!0,os_group:!0,os_version:!0,os_version_name:!0,page:!0,page_aisle1:!0,page_aisle2:!0,page_aisle3:!0,page_aisle4:!0,page_aisle5:!0,page_aisle6:!0,page_chapter1:!0,page_chapter2:!0,page_chapter3:!0,page_customcat1:!0,page_customcat1_id:!0,page_customcat2:!0,page_customcat2_id:!0,page_customcat3:!0,page_customcat3_id:!0,page_duration:!0,page_full_name:!0,page_position:!0,payment_mode:!0,podcast_episode:!0,podcast_feed:!0,podcast_url:!0,privacy_status:!0,product:!0,product_article:!0,product_brand:!0,product_category1:!0,product_category2:!0,product_category3:!0,product_category4:!0,product_category5:!0,product_category6:!0,product_discount:!0,product_id:!0,product_placement:!0,product_pricetaxfree:!0,product_pricetaxincluded:!0,product_promocode:!0,product_quantity:!0,product_stock:!0,product_variant:!0,shipping_costtaxfree:!0,shipping_costtaxincluded:!0,shipping_delivery:!0,site:!0,site_env:!0,site_id:!0,site_level2:!0,site_level2_id:!0,site_platform:!0,src:!0,src_ad_channel:!0,src_ad_detail_placement:!0,src_ad_general_placement:!0,src_aff_identifier:!0,src_aff_identifier_id:!0,src_aff_type:!0,src_aff_type_id:!0,src_campaign:!0,src_campaign_ad:!0,src_campaign_aff:!0,src_campaign_deprecated:!0,src_campaign_email:!0,src_campaign_group:!0,src_campaign_id:!0,src_campaign_rss:!0,src_campaign_sl:!0,src_creation:!0,src_creation_id:!0,src_detail:!0,src_direct_access:!0,src_email_link:!0,src_email_link_id:!0,src_email_recipient:!0,src_email_recipient_id:!0,src_email_recipient_list:!0,src_email_recipient_list_id:!0,src_email_send_date:!0,src_email_type:!0,src_format:!0,src_medium:!0,src_organic:!0,src_organic_detail:!0,src_portal_domain:!0,src_portal_site:!0,src_portal_site_id:!0,src_portal_url:!0,src_referrer_site_domain:!0,src_referrer_site_url:!0,src_referrer_url:!0,src_se:!0,src_se_category:!0,src_se_country:!0,src_sl_network:!0,src_sl_network_id:!0,src_sl_platform:!0,src_sl_platform_id:!0,src_sl_term:!0,src_social_networks:!0,src_type:!0,src_url:!0,src_url_domain:!0,src_variant:!0,src_variant_id:!0,src_webmail:!0,transaction_date:!0,transaction_firstpurchase:!0,transaction_id:!0,transaction_promocode:!0,transaction_status:!0,user_category:!0,user_days:!0,user_id:!0,user_recognition:!0,user_visit_per_day:!0,utm_campaign:!0,utm_content:!0,utm_medium:!0,utm_source:!0,utm_term:!0,visitor_days:!0,visitor_id:!0,visitor_visit_per_day:!0}},blacklist:{"*":{}}},storage:{whitelist:{},blacklist:{"*":!0}},events:{whitelist:{"*":!0},blacklist:{}}},exempt:{name:"exempt",properties:{include:{visitor_privacy_consent:!1,visitor_privacy_mode:"exempt"},whitelist:{"*":{app_crash:!0,app_crash_class:!0,app_crash_screen:!0,app_version:!0,browser:!0,browser_cookie_acceptance:!0,browser_group:!0,browser_version:!0,click:!0,click_chapter1:!0,click_chapter2:!0,click_chapter3:!0,click_full_name:!0,connection_monitor:!0,connection_organisation:!0,date:!0,date_day:!0,date_daynumber:!0,date_month:!0,date_monthnumber:!0,date_week:!0,date_year:!0,date_yearofweek:!0,device_brand:!0,device_display_height:!0,device_display_width:!0,device_name:!0,device_name_tech:!0,device_screen_diagonal:!0,device_screen_height:!0,device_screen_width:!0,device_type:!0,event_collection_platform:!0,event_collection_version:!0,event_hour:!0,event_id:!0,event_minute:!0,event_position:!0,event_second:!0,event_time:!0,event_time_utc:!0,event_url:!0,event_url_domain:!0,event_url_full:!0,exclusion_cause:!0,exclusion_type:!0,geo_city:!0,geo_continent:!0,geo_country:!0,geo_metro:!0,geo_region:!0,goal_type:!0,hit_time_utc:!0,os:!0,os_group:!0,os_version:!0,os_version_name:!0,page:!0,page_chapter1:!0,page_chapter2:!0,page_chapter3:!0,page_duration:!0,page_full_name:!0,page_position:!0,privacy_status:!0,site:!0,site_env:!0,site_id:!0,site_platform:!0,src:!0,src_detail:!0,src_direct_access:!0,src_organic:!0,src_organic_detail:!0,src_portal_domain:!0,src_portal_site:!0,src_portal_site_id:!0,src_portal_url:!0,src_referrer_site_domain:!0,src_referrer_site_url:!0,src_referrer_url:!0,src_se:!0,src_se_category:!0,src_se_country:!0,src_type:!0,src_url:!0,src_url_domain:!0,src_webmail:!0}},blacklist:{"*":{}}},storage:{whitelist:{pa_visitorid:!0,pa_privacy:!0},blacklist:{}},events:{whitelist:{"click.exit":!0,"click.navigation":!0,"click.download":!0,"click.action":!0,"page.display":!0},blacklist:{}}},"*":{properties:{whitelist:{"*":{connection_type:!0,device_timestamp_utc:!0,visitor_privacy_consent:!0,visitor_privacy_mode:!0}},blacklist:{"*":{}}},storage:{whitelist:{},blacklist:{}},events:{whitelist:{},blacklist:{}}}}}};function l(e,t,i){0<i.length&&"function"==typeof i[0]&&i[0](e,t,i.slice(1))}function r(e,t,i){t.build.url="".concat(e.getConfiguration("collectDomain"),"/").concat(e.getConfiguration("path"),"?s=").concat(e.getConfiguration("site")).concat(t.visitorId?"&idclient="+t.visitorId:""),t.build.data={events:t.events},l(e,t,i)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function d(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){s=!0,o=e},f:function(){try{n||null==i.return||i.return()}finally{if(s)throw o}}}}function o(e,t,i){var r,o=[];for(r in e.properties)if(Object.prototype.hasOwnProperty.call(e.properties,r)){var n,s=!1,a=d(t.events);try{for(a.s();!(n=a.n()).done;){var c=n.value;(e.properties[r].options.events&&-1<e.properties[r].options.events.indexOf(c.name)||!e.properties[r].options.events)&&(c.data[r]=e.properties[r].value,s=!0)}}catch(e){a.e(e)}finally{a.f()}s&&!e.properties[r].options.persistent&&o.push(r)}for(var _=0,p=o;_<p.length;_++){var u=p[_];delete e.properties[u]}l(e,t,i)}function n(e,t){this.getConfiguration=t.getConfiguration,this.setConfiguration=t.setConfiguration,this.options=e.options||{},this.visitorId=void 0,this.build={url:"",data:{}},this.storage={},this.privacy={},this.properties={},this.events=e.events||[],this.offline=[],this.builtData={}}function i(e){return null===e?"":(e+"").replace(p,"")}var s,f=function e(t,i){if("object"!==a(t)||null===t||t instanceof Date)return t;var r,o=new t.constructor;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(void 0===r||i&&void 0===t[r]||(o[r]=e(t[r])));return o},_=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,e="[\\x20\\t\\r\\n\\f]",p=new RegExp("^"+e+"+|((?:^|[^\\\\])(?:\\\\.)*)"+e+"+$","g"),u=function e(t){var i=a(t);if("object"!==i||null===t)return"string"===i&&(t='"'+t+'"'),String(t);var r,o,n=[],s=t.constructor===Array;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!==(i=a(o=t[r]))&&"undefined"!==i&&("string"===i?o='"'+o.replace(/[^\\]"/g,'\\"')+'"':"object"===i&&null!==o&&(o=e(o)),n.push((s?"":'"'+r+'":')+String(o)));return(s?"[":"{")+String(n)+(s?"]":"}")},g=function(e){var o,n=null,e=i(e+"");return e&&!i(e.replace(_,function(e,t,i,r){return 0===(n=o&&t?0:n)?e:(o=i||t,n+=!r-!i,"")}))?Function("return "+e)():null},e=window.navigator&&"function"==typeof window.navigator.sendBeacon?window.navigator.sendBeacon:void 0,v={post:{post:function(e,t,i){var r,o;window.XDomainRequest?((r=new window.XDomainRequest).open("POST",e,!0),r.onload=function(){i&&i(e,t,r)},r.send(u(t))):((o=new XMLHttpRequest).open("POST",e,!0),o.onreadystatechange=function(){4===o.readyState&&i&&i(e,t,o)},o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send(u(t)))}}.post,sendBeacon:e},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m={encodeURIComponent:window.encodeURIComponent,utf8:{encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t},decode:function(e){var t,i,r,o="",n=0;for(t=0;n<e.length;)(r=e.charCodeAt(n))<128?(o+=String.fromCharCode(r),n++):191<r&&r<224?(t=e.charCodeAt(n+1),o+=String.fromCharCode((31&r)<<6|63&t),n+=2):(t=e.charCodeAt(n+1),i=e.charCodeAt(n+2),o+=String.fromCharCode((15&r)<<12|(63&t)<<6|63&i),n+=3);return o}},base64:{encode:function(e){var t,i,r,o,n,s,a="",c=0;for(e=m.utf8.encode(e);c<e.length;)r=(s=e.charCodeAt(c++))>>2,o=(3&s)<<4|(t=e.charCodeAt(c++))>>4,n=(15&t)<<2|(i=e.charCodeAt(c++))>>6,s=63&i,isNaN(t)?n=s=64:isNaN(i)&&(s=64),a=a+h.charAt(r)+h.charAt(o)+h.charAt(n)+h.charAt(s);return a},decode:function(e){var t,i,r,o,n,s,a="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)r=h.indexOf(e.charAt(c++)),t=(15&(o=h.indexOf(e.charAt(c++))))<<4|(n=h.indexOf(e.charAt(c++)))>>2,i=(3&n)<<6|(s=h.indexOf(e.charAt(c++))),a+=String.fromCharCode(r<<2|o>>4),64!=n&&(a+=String.fromCharCode(t)),64!=s&&(a+=String.fromCharCode(i));return a=m.utf8.decode(a)}}},y=(s=window.crypto||window.msCrypto,{v4:function(){try{if(null!==s&&"object"===a(s))return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^s.getRandomValues(new Uint32Array(1))[0]&15>>e/4).toString(16)})}catch(e){console.error(e)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}});function w(e){var i=e;return{setConfiguration:function(e,t){i[e]=t},getConfiguration:function(e){if(void 0!==i[e])return f(i[e])},cloneData:function(){return f(i)}}}function b(e,t,i){function r(){l(e,t,i)}t.options&&t.options.onBeforeBuild?t.options.onBeforeBuild(e,t,r):r()}function C(e,t,i){function r(){l(e,t,i)}t.options&&t.options.onBeforeSend?t.options.onBeforeSend(e,t,r):r()}function x(e,t,i){e.privacy.filterEvents(t.events),e.privacy.filterProps(e.properties);for(var r=t.events,o=0;o<r.length;o++){e.privacy.filterProps(r[o].data,r[o].name);var n,s=e.privacy.modes[e.privacy.getMode()].properties.include||{};for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.privacy.isPropAllowed(n)&&(e.properties[n]={value:s[n],options:{}})}l(e,t,i)}function k(r,o,n){v.post(o.build.url,o.build.data,function(e,t,i){o.options&&o.options.hitSentCallback&&o.options.hitSentCallback(e,t,i),l(r,o,n)})}function S(e,t,i){l(e,t,i)}function P(i,r,o){i.storage.getItem(r.getConfiguration("storageVisitor"),function(t){r.getConfiguration("isVisitorClientSide")?i.storage.getItem("atuserid",function(e){null!==e&&i.storage.deleteItem("atuserid"),r.visitorId=r.getConfiguration("visitorId")||e||t||y.v4(),r.visitorId!==t||"relative"===r.getConfiguration("visitorStorageMode")?((e=new Date).setTime(e.getTime()+24*r.getConfiguration("storageLifetimeVisitor")*60*60*1e3),i.privacy.setItem(r.getConfiguration("storageVisitor"),r.visitorId,e,function(){i.storage.getItem(r.getConfiguration("storageVisitor"),function(e){null===e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r.visitorId)&&(r.visitorId=r.visitorId+"-NO"),l(i,r,o)})})):l(i,r,o)}):l(i,r,o)})}function O(t,i,r){void 0!==t.properties.user_id?l(t,i,r):t.getUser(function(e){null!==e&&t.setProperties({user_id:e.id,user_category:e.category,user_recognition:!0},{persistent:!0}),l(t,i,r)})}function A(o){var n=o.getConfiguration("privacy");this.currentMode="",this.previousMode="",this.modes=n.modes,this.storageKeys=n.storageKeys,this.setMode=function(i){var r;i!==this.currentMode&&this.modes[i]&&(this.previousMode=this.currentMode,this.currentMode=i,r=["optin","optout","noConsent","noStorage","exempt"],o.storage.getItem(o.getConfiguration("storageVisitor"),function(t){o.storage.getItem(n.storageKey,function(e){("noStorage"===i||(r.indexOf(i)<0||"optin"===i||"exempt"===i)&&("optout"===this.previousMode||"noConsent"===this.previousMode||"noStorage"===this.previousMode)||"noConsent"===i&&t||"optout"===i&&t!==this.modes[i].visitorId)&&(o.storage.deleteItem(o.getConfiguration("storageVisitor")),o.setVisitorId(void 0)),"optout"!==i&&"noConsent"!==i&&"noStorage"!==i||o.setVisitorId(this.modes[i].visitorId),this.filterProps(o.properties),this.filterKeys(),e!==i&&((e=new Date).setTime(e.getTime()+24*o.getConfiguration("storageLifetimePrivacy")*60*60*1e3),this.setItem(n.storageKey,i,e))}.bind(this))}.bind(this)))},this.createMode=function(e,t){var i;this.modes[e]||((i=f(this.modes.exempt)).name=e,i.properties.include.visitor_privacy_mode=e,i.properties.include.visitor_privacy_consent=t,this.modes[e]=i)},this.getMode=function(){return this.currentMode},this.init=function(){o.storage.getItem(n.storageKey,function(e){this.setMode(e&&this.modes[e]?e:o.getConfiguration("privacyDefaultMode"))}.bind(this))};var r=function(e,t,i,r,o,n){for(var s=t?"string"==typeof t?[t]:t:["*"],a=i?"string"==typeof i?[i]:i:["*"],c=o?"storage":n?"events":"properties",_=r?"blacklist":"whitelist",p=0;p<s.length;p++)if(void 0!==this.modes[s[p]])for(var u=this.modes[s[p]],l=0;l<a.length;l++){var d=u[c][_];void 0!==d[a[l]]||o||n||(d[a[l]]={});for(var f=0;f<e.length;f++)o||n?d[e[f]]=!0:d[a[l]][e[f]]=!0}}.bind(this);function s(e,t){if(e[t])return!0;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&"*"===i.charAt(i.length-1)&&0===t.indexOf(i.substring(0,i.length-1)))return!0;return!1}function i(e,t,i,r){i=s(t[i].events[e],r),r=s(t["*"].events[e],r);return i||r}function a(e,t,i,r){var o,n=e[t];if(n[r]&&n[r][i]||n["*"][i])return!0;for(o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&"*"===o.charAt(o.length-1)&&0===r.indexOf(o.substring(0,o.length-1))||o===r)for(var s in n[o])if(Object.prototype.hasOwnProperty.call(n[o],s)&&("*"===s.charAt(s.length-1)&&0===i.indexOf(s.substring(0,s.length-1))||i===s))return!0;return!1}function c(e,t,i){if("blacklist"===t&&e[t]["*"][i])return!0;for(var r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)){if(e[t][r][i])return!0;for(var o in e[t][r])if("*"===o.charAt(o.length-1)&&0===i.indexOf(o.substring(0,o.length-1)))return!0}return!1}function _(e,t,i,r,o){var n,r=o?(n=a(t[i].properties,e,r,o),a(t["*"].properties,e,r,o)):(n=c(t[i].properties,e,r),c(t["*"].properties,e,r));return n||r}function p(e,t,i){var r,o=e[t];if(o[i])return!0;for(r in o)if(Object.prototype.hasOwnProperty.call(o,r)&&"*"===r.charAt(r.length-1)&&0===i.indexOf(r.substring(0,r.length-1)))return!0;return!1}function u(e,t,i,r){i=p(t[i].storage,e,r),r=p(t["*"].storage,e,r);return i||r}this.include={properties:function(e,t,i){r(e,t,i)},property:function(e,t,i){r([e],t,i)},storageKeys:function(e,t){r(e,t,null,!1,!0)},storageKey:function(e,t){r([e],t,null,!1,!0)},events:function(e,t){r(e,t,null,!1,!1,!0)},event:function(e,t){r([e],t,null,!1,!1,!0)}},this.exclude={properties:function(e,t,i){r(e,t,i,!0)},property:function(e,t,i){r([e],t,i,!0)},storageKeys:function(e,t){r(e,t,null,!0,!0)},storageKey:function(e,t){r([e],t,null,!0,!0)},events:function(e,t){r(e,t,null,!0,!1,!0)},event:function(e,t){r([e],t,null,!0,!1,!0)}},this.isEventAllowed=function(e){var t=i("blacklist",this.modes,this.currentMode,e),e=i("whitelist",this.modes,this.currentMode,e);return!t&&e},this.isPropAllowed=function(e,t){var i=_("blacklist",this.modes,this.currentMode,e,t),t=_("whitelist",this.modes,this.currentMode,e,t);return!i&&t},this.isKeyAllowed=function(e){var t=u("blacklist",this.modes,this.currentMode,e),e=u("whitelist",this.modes,this.currentMode,e);return!t&&e},this.setItem=function(e,t,i,r){this.isKeyAllowed(e)?o.storage.setItem(e,t,i,r):r&&r()},this.filterProps=function(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&!this.isPropAllowed(i,t||void 0)&&delete e[i]},this.filterKeys=function(){for(var e in this.storageKeys)Object.prototype.hasOwnProperty.call(this.storageKeys,e)&&!this.isKeyAllowed(e)&&o.storage.deleteItem(e)},this.filterEvents=function(e){for(var t=e.length-1;0<=t;t--)this.isEventAllowed(e[t].name)||e.splice(t,1)},this.init()}function I(o){var n=o.getConfiguration("storageUser");this.setUser=function(e,t,i){var r={id:e,category:t};o.setProperties({user_id:e,user_category:t,user_recognition:!1},{persistent:!0}),!1!==i&&((i=new Date).setTime(i.getTime()+24*o.getConfiguration("storageLifetimeUser")*60*60*1e3),o.privacy.setItem(n,r,i))},this.getUser=function(i){o.storage.getItem(n,function(e){var t=e;!e&&o.properties.user_id&&(t={id:o.properties.user_id.value,category:o.properties.user_category.value}),i&&i(t)})},this.deleteUser=function(e){o.deleteProperty("user_id"),o.deleteProperty("user_category"),o.deleteProperty("user_recognition"),o.storage.deleteItem(n,function(){e&&e()})}}function M(e,t,i){l(e,t,i)}var U=function(o){this.setItem=function(e,t,i,r){t=e+"="+(o.getConfiguration("encodeStorageBase64")?m.base64.encode(u(t)):u(t));t+=";path="+o.getConfiguration("cookiePath"),t+=";domain="+o.getConfiguration("cookieDomain"),t+=o.getConfiguration("cookieSecure")?";secure":"",t+=";samesite="+o.getConfiguration("cookieSameSite"),t+=i?";expires="+i.toUTCString():"",document.cookie=t,r&&r()},this.getItem=function(e,t){var i=null,e=new RegExp("(?:^| )"+e+"=([^;]+)").exec(document.cookie)||null;e&&(i=g(o.getConfiguration("encodeStorageBase64")?m.base64.decode(e[1]):e[1])),t&&t(i)},this.deleteItem=function(e,t){var i=new Date;i.setTime(i.getTime()-1e3),this.setItem(e,"",i,t)}};function j(e,t,i){e.setProperty("event_collection_platform","js"),e.setProperty("event_collection_version",t.getConfiguration("version")),e.setProperty("device_timestamp_utc",(new Date).getTime()),e.setProperty("device_screen_width",window.screen.width),e.setProperty("device_screen_height",window.screen.height),e.setProperty("device_display_width",window.innerWidth||document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:""),e.setProperty("device_display_height",window.innerHeight||document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:"");var r=function(e,t){var i,r=d(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(-1<e.indexOf(o)){var n=e.split(o);return[n[0],n.slice(1).join(o)]}}}catch(e){r.e(e)}finally{r.f()}}(window.navigator?window.navigator.language||window.navigator.userLanguage:"",["-","_"])||["",""];e.setProperty("browser_language",r[0]),e.setProperty("browser_language_local",r[1]),e.setProperty("event_temporary_referrer",document.referrer||""),!(r="true"===t.getConfiguration("addEventURL"))&&"withoutQS"!==t.getConfiguration("addEventURL")||e.setProperty("page_url",r?window.location.href:window.location.protocol+"//"+window.location.host+window.location.pathname),l(e,t,i)}function E(e){this.properties={},this.cfg=new w(f(e)||t),this.setConfiguration=this.cfg.setConfiguration,this.getConfiguration=this.cfg.getConfiguration,this.storage=new U(this),this.privacy=new A(this),this.user=new I(this)}function T(e,t){var i=[x,P,O,M,j,o,b,r,S,C,k],e={events:e,options:t};0<i.length&&"function"==typeof i[0]&&(t=new w(this.cfg.cloneData()),i[0](this,new n(e,t),i.slice(1)))}Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError('"this" vaut null ou n est pas dÃ©fini');var r=Object(this),o=r.length>>>0;if(0==o)return-1;t=+t||0;if(o<=(t=Math.abs(t)===1/0?0:t))return-1;for(i=Math.max(0<=t?t:o-Math.abs(t),0);i<o;){if(i in r&&r[i]===e)return i;i++}return-1}),Function.prototype.bind||(Function.prototype.bind=function(r){for(var e=arguments.length,o=new Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];var n=this;return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.apply(r,[].concat(o,t))}}),E.prototype.setProperty=function(e,t,i){this.privacy.isPropAllowed(e)&&(this.properties[e]={value:t,options:i||{}})},E.prototype.setProperties=function(e,t){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&this.setProperty(i,e[i],t)},E.prototype.deleteProperty=function(e){delete this.properties[e]},E.prototype.sendEvent=function(e,t,i){T.call(this,[{name:e,data:t}],i)},E.prototype.sendEvents=function(e,t){T.call(this,e,t)},E.prototype.getVisitorId=function(t){var i=null;return this.storage.getItem(this.getConfiguration("storageVisitor"),function(e){e=this.getConfiguration("visitorId")||e;t?t(e):i=e}.bind(this)),i},E.prototype.setVisitorId=function(e){this.setConfiguration("visitorId",e)},E.prototype.setUser=function(e,t,i){this.user.setUser(e,t,i)},E.prototype.getUser=function(e){this.user.getUser(e)},E.prototype.deleteUser=function(){this.user.deleteUser()},E.prototype.PA=E,window&&!window.PianoAnalytics&&(window.pa=new E(t))}();
